<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
        <meta name="author" content="Peter Steinbach" />
            <title>In the trenches of SPIM data streams at the MPI CBG</title>
    <meta name="description" content="In the trenches of SPIM data streams at the MPI CBG">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="my_reveal.css"/>
        <link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">
    
        <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">
    
    <link rel="stylesheet" href="my_reveal_overrides.css"/>
    
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = 'reveal.js/css/print/pdf.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]>
	<script src="reveal.js/lib/js/html5shiv.js"></script>
	<![endif]-->
          </head>
  <body>
        <div class="reveal">
      <div class="slides">

		<section>
	  <h1 class="title">In the trenches of SPIM data streams at the MPI CBG</h1>
	  	  <p>
	    <b>Peter Steinbach</b><br>
	    <emph>(Max Planck Institute of Molecular Cell Biology and Genetics)</emph><br>
	    <a href="mailto:steinbac@mpi-cbg.de">steinbac@mpi-cbg.de</a>
	    <br><br>
	  </p>
	  
	  <h3 class="date">Sep 12, 2017</h3>
	</section>
		
	<section><section id="max-planck-institute-of-molecular-cell-biology-and-genetics-mpi-cbg" class="titleslide slide level1"><h1>Max Planck Institute of Molecular Cell Biology and Genetics (MPI CBG)</h1></section><section id="the-institute" class="slide level2">
<h1>The Institute</h1>
<div class="row vertical-align">
<div class="col-xs-8">
<center>
<img src="img/800px-MPI-CBG_building_outside_4pl.jpg" /><br />
<em>Scientific Software Engineer</em> at Max Planck Institute of Molecular Cell Biology and Genetics
</center>
</div>
<div class="col-xs-4">
<ul>
<li>Dresden, Germany</li>
<li>500 staff</li>
<li>founded 2001</li>
<li>cell biology</li>
<li>genomics</li>
<li>systems biology</li>
</ul>
</div>
</div>
</section><section id="outline" class="slide level2">
<h1>Outline</h1>
<div style="font-size : 1.5em">
<center>
<ol type="1">
<li><p>SPIM@CBG : overview and history</p></li>
<li><p>Automation, Reduction and more</p></li>
<li>Present and Future</li>
</ol>
</center>
</div>
</section></section>
<section><section id="spimcbg" class="titleslide slide level1"><h1>SPIM@CBG</h1></section><section id="section" class="slide level2">
<h1>2012/2013</h1>
<center>
<img src="img/spim_dataflow_2014.png" style="width:80.0%" /><br />
used by Huisken Lab
</center>
</section><section id="section-1" class="slide level2">
<h1>2016</h1>
<center>
<img src="img/spim_dataflow_2016_wide.png" style="width:75.0%" /><br />
used by <em>Huisken Lab</em>, <em>Myers Lab</em>, Tomancak Lab, LMF
</center>
</section><section id="data-rates" class="slide level2">
<h1>Data Rates</h1>
<div style="font-size : 1.25em">
<table>
<thead>
<tr class="header">
<th style="text-align: right;"></th>
<th style="text-align: right;">Commercial SPIM</th>
<th style="text-align: right;">Custom SPIM</th>
<th style="text-align: right;">LHC Run 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">MB/s</td>
<td style="text-align: right;">300</td>
<td style="text-align: right;">1600</td>
<td style="text-align: right;">1000</td>
</tr>
<tr class="even">
<td style="text-align: right;">TB/day</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">138</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="odd">
<td style="text-align: right;">TB/week</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">966</td>
<td style="text-align: right;">602</td>
</tr>
<tr class="even">
<td style="text-align: right;"><strong>Storage/TB</strong></td>
<td style="text-align: right;"><strong>2500</strong></td>
<td style="text-align: right;"><strong>2500</strong></td>
<td style="text-align: right;"><strong>303 154</strong></td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: right;">CBG</td>
<td style="text-align: right;">CBG</td>
<td style="text-align: right;"><a href="http://wlcg.web.cern.ch/">WLCG</a></td>
</tr>
</tbody>
</table>
</div>
</section><section id="central-storage" class="slide level2">
<h1>Central Storage</h1>
<center>
<img src="img/stornext.png" style="width:90.0%" />
</center>
</section><section id="hpc" class="slide level2">
<h1>HPC</h1>
<div class="row vertical-align">
<div class="col-xs-8">
<center>
<img src="img/furiosa_small.png" style="width:90.0%" />
</center>
</div>
<div class="col-xs-4">
<ul>
<li>5 + 1 racks in off-campus data center</li>
<li>3632 cores in 132 nodes</li>
<li>23 nodes with 2 GPUs each</li>
<li>2.1 PB usable lustre storage</li>
<li>IB FDR interconnect</li>
</ul>
</div>
</div>
</section></section>
<section><section id="automation-reduction-and-more" class="titleslide slide level1"><h1>Automation, Reduction and more</h1></section><section id="top-level-view" class="slide level2">
<h1>Top level view</h1>
<div class="row vertical-align">
<div class="col-xs-6">
<center>
<img src="fig/spim-workflow.svg" style="width:40.0%" />
</center>
</div>
<div class="col-xs-6">
<ul>
<li>aquisition on the microscope<br />
 </li>
<li>quality control<br />
(can happen on the scope)<br />
 </li>
<li>processing on HPC infrastructure<br />
(fusion, deconvolution)<br />
 </li>
<li>storage for downstream analysis (publication)</li>
</ul>
</div>
</div>
</section><section id="automate-transfer" class="slide level2">
<h1>Automate Transfer?</h1>
<div class="row vertical-align">
<div class="col-xs-8">
<center>
<img src="img/humanshu_bhatia_TUDresden_thesis_p60_fig6.8.png" style="width:85.0%" />
</center>
</div>
<div class="col-xs-4">
<ul>
<li><p>idea: monitor directory on aquisition host and apply rule based data transfers</p></li>
<li><p>master thesis at TU Dresden in 2014/2015 comparing</p></li>
<li><p>results from ramdisk to ramdisk promising only (for <a href="https://irods.org/">iRODS</a>)</p></li>
<li><p>downstream transparency of <a href="https://irods.org/">iRODS</a> unclear</p></li>
<li><p><a href="https://www.unicore.eu/">UNICORE</a> not yet there</p></li>
</ul>
</div>
</div>
</section><section id="automated-parallel-pipeline" class="slide level2">
<h1>Automated Parallel Pipeline</h1>
<div class="row vertical-align">
<div class="col-xs-6">
<center>
<img src="img/cschmied_pipeline.png" style="width:70.0%" />
</center>
</div>
<div class="col-xs-6">
<ul>
<li><p>publication by <a href="https://academic.oup.com/bioinformatics/article/32/7/1112/1744153/An-automated-workflow-for-parallel-processing-of">Schmied et al., 2016</a></p></li>
<li><p>express individual steps as direct acyclic graph in <a href="https://snakemake.readthedocs.io/en/stable/">snakemake</a></p></li>
<li><p>running <a href="fiji.sc">Fiji</a> in headless mode challenging</p></li>
<li><p>parameter interface through <a href="fiji.sc">Fiji</a> macros very time consuming</p></li>
<li><p>portable and scalable parallel execution</p></li>
<li><p>replaced a large pile of shell scripts</p></li>
</ul>
</div>
</div>
</section><section id="training" class="slide level2">
<h1>Training</h1>
<div class="row vertical-align">
<div class="col-xs-6">
<center>
IMAGE OF OUR COURSES
</center>
</div>
<div class="col-xs-6">
<ul>
<li><p>knowledge is key when data becomes large</p></li>
<li><p>rolled out <a href="www.software-carpentry.org">software carpentry</a> style course curriculum<br />
( topics: bash, git, python, R, HPC )</p></li>
<li><p>extremely positive feedback and high demand</p></li>
</ul>
</div>
</div>
<p> </p>
<center>
<strong>Trained scientists are happy scientists!</strong>
</center>
</section></section>
<section><section id="present-and-future" class="titleslide slide level1"><h1>Present and Future</h1></section><section id="automated-transfers" class="slide level2" data-background-image="img/DARPA_Big_Data.jpg">
<h1>Automated Transfers!</h1>
<div style="font-size : 1.25em">
<center>
<ul>
<li><p>API and format are still open</p></li>
<li><p>obtain meta data during ingest (user interaction)</p></li>
<li><p>interface acquisition to distributed pipelines</p></li>
<li><p>challenge: stay flexible</p></li>
</ul>
</center>
</div>
</section><section id="the-future" class="slide level2">
<h1>The Future</h1>
<div class="row vertical-align">
<div class="col-xs-6">
<center>
<img src="fig/spim-workflow-future.svg" style="width:40.0%" />
</center>
</div>
<div class="col-xs-6">
<ul>
<li>Aquisition of deconvolved &amp; compressed stacks at the source<br />
 </li>
<li>Post-Processing to enhance resolution<br />
 </li>
<li>Realtime Visualisation (holo deck)<br />
 </li>
<li>Downstream analysis or storage or cloud based sharing or ..</li>
</ul>
</div>
</div>
</section></section>
<section><section id="summary" class="titleslide slide level1"><h1>Summary</h1></section><section id="spim-is-here-to-stay" class="slide level2">
<h1>SPIM is here to stay</h1>
<ul>
<li><p>SPIM microscopes are capable of produce unprecedented amounts of data (wrt potential and size)</p></li>
<li><p>MPI CBG SPIM community is actively solving inherent problems (deconvolution, lack of resolution, compression, data management, ...)</p></li>
<li><p>Good infrastructure (software/hardware) is key to high scientific discovery rate</p></li>
</ul>
 
<center>
<strong>Thank you for your attention!</strong>
</center>
</section></section>
      </div>
    </div>


    <script src="reveal.js/lib/js/head.min.js"></script>
    <script src="reveal.js/js/reveal.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
      controls: false,
      progress: true,
      history: true,
      center: true,
      
      slideNumber: true,
      // The "normal" size of the presentation, aspect ratio will be preserved
      // when the presentation is scaled to fit different resolutions. Can be
      // specified using percentage units.
      width: 1920,
      height: 1080,

      // Factor of the display size that should remain empty around the content
      margin: 0.01,

      // Bounds for smallest/largest possible scale to apply to content
      minScale: 0.2,
      maxScale: 1.5,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: 'slide', // default/cube/page/concave/zoom/linear/fade/none

      // Optional libraries used to extend on reveal.js
      dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
      //          { src: 'reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; }, }
      //          { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]});
    </script>
      </body>
</html>
